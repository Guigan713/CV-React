# ============================================================================
# KUSTOMIZATION - Orchestration des manifests
# ============================================================================
# Permet de déployer tous les manifests avec: kubectl apply -k .
# ============================================================================

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: cv-react

# Labels communs appliqués à toutes les ressources
commonLabels:
  app: cv-react
  managed-by: kustomize

# Namespace par défaut
namespace: cv-react

# Ressources à déployer (ordre important)
resources:
  - namespace.yaml
  - configmap.yaml
  - secrets.yaml
  - postgres-init.yaml
  - postgres.yaml
  - backend.yaml
  - frontend.yaml
  - ingress.yaml
